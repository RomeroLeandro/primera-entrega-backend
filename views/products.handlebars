<h4>Página: {{products.page}} de {{products.totalPages}}</h4>

<div style="display: flex">
  <a href="{{buildFilterUrl requestUrl (hash limit=10)}}" >10 por página</a>
  <a href="{{buildFilterUrl requestUrl (hash limit=20)}}" >20 por página</a>
  <a href="{{buildFilterUrl requestUrl (hash limit=50)}}" >50 por página</a>
</div>

<form action="{{buildFilterUrl requestUrl (hash limit=products.limit category=products.category stock=products.stock sort=products.sort)}}" method="GET">
  <select name="category" onchange="this.form.submit()">
    <option value="">Todas las categorías</option>
    {{#each categoriesWithSelection}}
      <option value="{{category}}" {{#ifCond products.category '===' category}}selected{{/ifCond}}>{{category}}</option>
    {{/each}}
  </select>
</form>

<form action="{{buildFilterUrl requestUrl (hash limit=products.limit category=products.category stock=products.stock sort=products.sort)}}" method="GET">
  <select name="stock" onchange="this.form.submit()">
    <option value="">Todos los niveles de stock</option>
    <option value="1" {{#ifCond products.stock '===' 1}}selected{{/ifCond}}>1 unidad</option>
    <option value="2" {{#ifCond products.stock '===' 2}}selected{{/ifCond}}>2 unidades</option>
    <option value="3" {{#ifCond products.stock '===' 3}}selected{{/ifCond}}>3 unidades</option>
    <option value="4" {{#ifCond products.stock '===' 4}}selected{{/ifCond}}>4 unidades</option>
    <option value="5" {{#ifCond products.stock '===' 5}}selected{{/ifCond}}>5 unidades</option>
    <option value="6" {{#ifCond products.stock '===' 6}}selected{{/ifCond}}>6 unidades</option>
  </select>
</form>

<form action="{{buildFilterUrl requestUrl (hash limit=products.limit category=products.category stock=products.stock sort=products.sort)}}" method="GET">
  <select name="sort" onchange="this.form.submit()">
    <option value="">Ordenar por</option>
    <option value="asc" {{#ifCond products.sort '===' 'asc'}}selected{{/ifCond}}>Menor precio</option>
    <option value="desc" {{#ifCond products.sort '===' 'desc'}}selected{{/ifCond}}>Mayor precio</option>
  </select>
</form>

<div class="product-container">
  {{#each products.docs}}
    <div class="card">
      <img src="..." class="card-img-top" alt="..." />
      <div class="card-body">
        <h5 class="card-title">{{this.title}}</h5>
        <p class="card-text">{{this.description}}</p>
        <p class="card-text">${{this.price}}</p>
        <a href="#" class="btn btn-primary">Agregar al carrito</a>
      </div>
    </div>
  {{/each}}
</div>

<nav aria-label="Page navigation example ">
    <ul class="pagination d-flex justify-content-center">
      {{#if products.hasPrevPage}}
        <li class="page-item">
          <a class="page-link" href="{{buildPaginationLink 'page' products.prevPage requestUrl}}">Anterior</a>
        </li>
      {{/if}}

      {{#each pages}}

  <li class="page-item">

    <a class="page-link" href="{{buildPaginationLink 'page' this requestUrl}}">{{this}}</a>

  </li>

{{/each}}

      {{#if products.hasNextPage}}
        <li class="page-item">
          <a class="page-link" href="{{buildPaginationLink 'page' products.nextPage requestUrl}}">Siguiente</a>
        </li>
      {{/if}}
    </ul>
  </nav>